(this.webpackJsonpMac=this.webpackJsonpMac||[]).push([[45],{1018:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t(29),i=t(36),c=t(142),l=t(473),o=t(547),s=t(932),d=t(550),u=t(665),b=t(555),h=t(545),m=t(23),j=(t(88),t(15)),x=t(548),p=t(528),f=(t(670),t(671),t(1036),t(1040),t(1038),t(1039),t(1037),t(536),t(546),t(1022),t(570),t(580),t(144),t(213),t(1)),g=t(22),v=t(12),O=t.n(v),w=t(143),S=t(61),k=t(114),C=t(549),y=t(544),A=t(214),_=[{value:"",id:""},{value:"Administrador",id:"administrator"},{id:"workshop_agent",value:"Encargado - Taller"},{id:"dealership_agent",value:"Vendedor"}],R=function(e){var a=Object(r.g)(),t=Object(n.useState)([]),i=Object(j.a)(t,2),c=i[0],o=i[1];Object(n.useEffect)((function(){A.a.firestore().collection("dealership_branches").get().then((function(e){var a=[{id:"",name:"",vehicles_count:0}];e.forEach((function(e){a.push(Object(m.a)(Object(m.a)({},e.data()),{},{id:e.id}))})),console.log(a),o(a)}))}),[]);return Object(f.jsx)(k.a,{initialValues:{name:"",phone:0,email:"",rank:"",branch_id:""},validationSchema:S.f().shape({name:S.h().max(255).required(),phone:S.e().min(0).required(),email:S.h().max(255).required(),rank:S.e().min(0).required(),branch_id:S.h().max(255).required()}),onSubmit:function(){var e=Object(g.a)(O.a.mark((function e(t,n){var r,i,l,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.setErrors,i=n.setStatus,l=n.setSubmitting,e.prev=1,console.log(t.email),o=A.b.httpsCallable("prueba"),e.abrupt("return",o(t.email).then((function(e){console.log(e);var n={avatar:"https://firebasestorage.googleapis.com/v0/b/Mac-desarrollo.appspot.com/o/staff%2FYyCGDuzPuRSRj7JG1GXZawDODAq1%2F840_560%20(1).jpg?alt=media&token=aec0ca02-5912-4d32-b849-c7e2be8b8f55",branch:{id:t.branch_id,value:c.filter((function(e){return e.id===t.branch_id}))[0].name},email:t.email,name:t.name,phone:t.phone,rank:{id:t.rank,value:_.filter((function(e){return e.id===t.rank}))[0].value}};console.log(n),A.a.firestore().collection("staff").doc(e.data).set(n).then((function(){return w.b.success("Administrador Registrado","Se ha registrado al administador ".concat(t.name," exitosamente!")),i({success:!0}),l(!1),a("/dashboard/taller/clientes"),!0}))})).catch((function(e){return console.error(e),w.b.error("Something went wrong!"),i({success:!1}),r({submit:e.message}),l(!1),!0})));case 7:return e.prev=7,e.t0=e.catch(1),console.error(e.t0),w.b.error("Something went wrong!"),i({success:!1}),r({submit:e.t0.message}),l(!1),e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(a,t){return e.apply(this,arguments)}}(),children:function(t){var n=t.errors,r=t.handleBlur,i=t.handleChange,o=t.handleSubmit,d=t.isSubmitting,u=t.touched,b=t.values;return Object(f.jsx)("form",Object(m.a)(Object(m.a)({onSubmit:o},e),{},{children:Object(f.jsxs)(s.a,{container:!0,spacing:3,children:[Object(f.jsx)(s.a,{item:!0,lg:12,md:12,xs:12,children:Object(f.jsx)(x.a,{children:Object(f.jsx)(C.a,{children:Object(f.jsxs)(s.a,{container:!0,spacing:3,children:[Object(f.jsx)(s.a,{item:!0,md:6,xs:12,children:Object(f.jsx)(p.a,{error:Boolean(u.name&&n.name),fullWidth:!0,helperText:u.name&&n.name,label:"Nombre y Apellido",name:"name",type:"text",onBlur:r,onChange:i,value:b.name,variant:"outlined"})}),Object(f.jsx)(s.a,{item:!0,md:6,xs:12,children:Object(f.jsx)(p.a,{error:Boolean(u.phone&&n.phone),fullWidth:!0,helperText:u.phone&&n.phone,label:"Tel\xe9fono",name:"phone",type:"number",onBlur:r,onChange:i,value:b.phone,variant:"outlined"})}),Object(f.jsx)(s.a,{item:!0,md:6,xs:12,children:Object(f.jsx)(p.a,{fullWidth:!0,label:"Rango",name:"rank",onChange:i,select:!0,SelectProps:{native:!0},value:b.rank,variant:"outlined",children:_.map((function(e){return Object(f.jsx)("option",{value:e.id,children:e.value},e.id)}))})}),Object(f.jsx)(s.a,{item:!0,md:6,xs:12,children:Object(f.jsx)(p.a,{error:Boolean(u.email&&n.email),fullWidth:!0,helperText:u.email&&n.email,label:"Email",name:"email",type:"email",onBlur:r,onChange:i,value:b.email,variant:"outlined"})}),Object(f.jsx)(s.a,{item:!0,md:12,xs:12,children:Object(f.jsx)(p.a,{fullWidth:!0,label:"Sucursal",name:"branch_id",onChange:i,select:!0,SelectProps:{native:!0},value:b.branch_id,variant:"outlined",children:c.map((function(e){return Object(f.jsx)("option",{value:e.id,children:e.name},e.id)}))})})]})})})}),Object(f.jsxs)(s.a,{item:!0,lg:2,md:2,xs:12,children:[n.submit&&Object(f.jsx)(l.a,{sx:{mt:3},children:Object(f.jsx)(y.a,{error:!0,children:n.submit})}),Object(f.jsx)(l.a,{sx:{display:"flex",justifyContent:"flex-end",mt:3},children:Object(f.jsx)(h.a,{color:"primary",disabled:d,type:"submit",variant:"contained",onClick:function(){return function(e){return console.log(e.email),A.b.httpsCallable("prueba")(e.email).then((function(t){console.log(t);var n={avatar:"https://firebasestorage.googleapis.com/v0/b/Mac-desarrollo.appspot.com/o/staff%2FYyCGDuzPuRSRj7JG1GXZawDODAq1%2F840_560%20(1).jpg?alt=media&token=aec0ca02-5912-4d32-b849-c7e2be8b8f55",branch:{id:e.branch_id,value:c.filter((function(a){return a.id===e.branch_id}))[0].name},email:e.email,name:e.name,phone:e.phone,rank:{id:e.rank,value:_.filter((function(a){return a.id===e.rank}))[0].value}};console.log(n),A.a.firestore().collection("staff").doc(t.data).set(n).then((function(){return w.b.success("Administrador Registrado","Se ha registrado al administador ".concat(e.name," exitosamente!")),a("/dashboard/taller/clientes"),!0}))})).catch((function(e){return console.error(e),w.b.error("Something went wrong!"),!0}))}(b)},children:"Registrar Cliente"})})]})]})}))}})},B=(t(734),t(551),t(91),t(216)),M=t(668),z=t(217),D=t(141),q=t(41);a.default=function(){var e=Object(B.a)().settings,a=Object(q.a)().user,t=Object(r.g)();return Object(n.useEffect)((function(){D.a.push({event:"page_view"}),A.a.firestore().collection("staff").doc(a.id).get().then((function(e){"dealership_agent"===e.data().rank.id&&t("/dashboard")}))}),[]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(c.a,{children:Object(f.jsx)("title",{children:"Dashboard: Crear Administradores | Mac Admin"})}),Object(f.jsx)(l.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:8},children:Object(f.jsxs)(o.a,{maxWidth:!!e.compact&&"xl",children:[Object(f.jsxs)(s.a,{container:!0,justifyContent:"space-between",spacing:3,children:[Object(f.jsxs)(s.a,{item:!0,children:[Object(f.jsx)(d.a,{color:"textPrimary",variant:"h5",children:"Agregar Administradores"}),Object(f.jsxs)(u.a,{"aria-label":"breadcrumb",separator:Object(f.jsx)(z.a,{fontSize:"small"}),sx:{mt:1},children:[Object(f.jsx)(b.a,{color:"textPrimary",component:i.b,to:"/dashboard",variant:"subtitle2",children:"Dashboard"}),Object(f.jsx)(b.a,{color:"textPrimary",component:i.b,to:"/dashboard/taller/clientes",variant:"subtitle2",children:"Listado de Administradores"}),Object(f.jsx)(d.a,{color:"textSecondary",variant:"subtitle2",children:"Agregar Administrador"})]})]}),Object(f.jsx)(s.a,{item:!0,children:Object(f.jsx)(l.a,{sx:{m:-1},children:Object(f.jsx)(h.a,{color:"primary",component:i.b,startIcon:Object(f.jsx)(M.a,{fontSize:"small"}),sx:{mt:1},to:"/dashboard/taller/clientes",variant:"outlined",children:"Cancelar"})})})]}),Object(f.jsx)(l.a,{sx:{mt:3},children:Object(f.jsx)(R,{})})]})})]})}},570:function(e,a,t){"use strict";var n=t(31),r=t(1),i=Object(n.a)(Object(r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(r.jsx)("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})}),"ArrowRight");a.a=i},580:function(e,a,t){"use strict";var n=t(31),r=t(1),i=Object(n.a)(Object(r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(r.jsx)("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})}),"Search");a.a=i},668:function(e,a,t){"use strict";var n=t(31),r=t(1),i=Object(n.a)(Object(r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(r.jsx)("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"ArrowLeft");a.a=i}}]);
//# sourceMappingURL=45.dced3a53.chunk.js.map