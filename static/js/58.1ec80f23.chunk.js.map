{"version":3,"sources":["components/dashboard/workshop/appointments/AppointmentDetails.js","views/dashboard/workshop/appointments/AppointmentsDetails.js","icons/Check.js"],"names":["AppointmentDetails","props","brandName","modelName","color","client","description","km","phone","other","console","log","Card","CardHeader","title","Divider","Table","TableBody","TableRow","TableCell","Typography","variant","numeral","format","tabs","label","value","AppointmentsDetails","settings","useSettings","user","useAuth","navigate","useNavigate","useState","vehicle","setVehicle","currentTab","setCurrentTab","id","useParams","isSubmit","setIsSubmit","useEffect","firebase","firestore","collection","doc","get","then","snap","data","rank","gtm","push","event","Box","sx","backgroundColor","minHeight","py","Container","maxWidth","compact","Grid","container","justifyContent","spacing","item","name","Breadcrumbs","separator","ChevronRight","fontSize","mt","Link","component","RouterLink","to","Tabs","indicatorColor","onChange","scrollButtons","textColor","map","tab","Tab","lg","md","xl","xs","brand","model","year","m","Button","startIcon","Check","disabled","onClick","delete","toast","success","createSvgIcon","xmlns","viewBox","fill","fillRule","d","clipRule"],"mappings":"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","file":"static/js/58.1ec80f23.chunk.js","sourcesContent":["import PropTypes from 'prop-types';\nimport numeral from 'numeral';\nimport {\n  // Box,\n  // Button,\n  Card,\n  CardHeader,\n  Divider,\n  Table,\n  TableBody,\n  TableCell,\n  TableRow,\n  Typography\n} from '@material-ui/core';\n// import LockIcon from '../../../../icons/Lock';\n// import UserIcon from '../../../../icons/User';\n// import Label from '../../../Label';\n\nconst AppointmentDetails = (props) => {\n  const { brandName, modelName, color, client, description, km, phone, ...other } = props;\n  console.log(km);\n  return (\n    <Card {...other}>\n      <CardHeader title=\"Detalle de Cita\" />\n      <Divider />\n      <Table>\n        <TableBody>\n          <TableRow>\n            <TableCell>\n              <Typography\n                color=\"textPrimary\"\n                variant=\"subtitle2\"\n              >\n                Modelo\n              </Typography>\n            </TableCell>\n            <TableCell>\n              <Typography\n                color=\"textSecondary\"\n                variant=\"body2\"\n              >\n                {brandName}\n                {' - '}\n                {modelName}\n              </Typography>\n              {/* <Label color={isVerified ? 'success' : 'error'}>\n                {isVerified ? 'Email verified' : 'Email not verified'}\n              </Label> */}\n            </TableCell>\n          </TableRow>\n          <TableRow>\n            <TableCell>\n              <Typography\n                color=\"textPrimary\"\n                variant=\"subtitle2\"\n              >\n                Cliente\n              </Typography>\n            </TableCell>\n            <TableCell>\n              <Typography\n                color=\"textSecondary\"\n                variant=\"body2\"\n              >\n                {client}\n              </Typography>\n            </TableCell>\n          </TableRow>\n          <TableRow>\n            <TableCell>\n              <Typography\n                color=\"textPrimary\"\n                variant=\"subtitle2\"\n              >\n                Año\n              </Typography>\n            </TableCell>\n            <TableCell>\n              <Typography\n                color=\"textSecondary\"\n                variant=\"body2\"\n              >\n                {color}\n              </Typography>\n            </TableCell>\n          </TableRow>\n          <TableRow>\n            <TableCell>\n              <Typography\n                color=\"textPrimary\"\n                variant=\"subtitle2\"\n              >\n                Descripción\n              </Typography>\n            </TableCell>\n            <TableCell>\n              <Typography\n                color=\"textSecondary\"\n                variant=\"body2\"\n              >\n                {description}\n              </Typography>\n            </TableCell>\n          </TableRow>\n          <TableRow>\n            <TableCell>\n              <Typography\n                color=\"textPrimary\"\n                variant=\"subtitle2\"\n              >\n                Kilometraje\n              </Typography>\n            </TableCell>\n            <TableCell>\n              <Typography\n                color=\"textSecondary\"\n                variant=\"body2\"\n              >\n                {numeral(km).format('0,0')}\n              </Typography>\n            </TableCell>\n          </TableRow>\n          <TableRow>\n            <TableCell>\n              <Typography\n                color=\"textPrimary\"\n                variant=\"subtitle2\"\n              >\n                Número de celular\n              </Typography>\n            </TableCell>\n            <TableCell>\n              <Typography\n                color=\"textSecondary\"\n                variant=\"body2\"\n              >\n                {phone}\n              </Typography>\n            </TableCell>\n          </TableRow>\n        </TableBody>\n      </Table>\n    </Card>\n  );\n};\n\nAppointmentDetails.propTypes = {\n  brandName: PropTypes.string,\n  modelName: PropTypes.string,\n  color: PropTypes.string,\n  client: PropTypes.string,\n  description: PropTypes.string,\n  km: PropTypes.string,\n  phone: PropTypes.string,\n};\n\nexport default AppointmentDetails;\n","import { useState, useEffect } from 'react';\nimport { Link as RouterLink, useParams, useNavigate } from 'react-router-dom';\nimport { Helmet } from 'react-helmet-async';\nimport toast from 'react-hot-toast';\nimport {\n  Box,\n  Breadcrumbs,\n  // Button,\n  Container,\n  Divider,\n  Grid,\n  Link,\n  Tab,\n  Tabs,\n  Typography,\n  Button\n} from '@material-ui/core';\nimport CheckIcon from '../../../../icons/Check';\n// import { customerApi } from '../../../../__fakeApi__/customerApi';\nimport AppointmentDetails from '../../../../components/dashboard/workshop/appointments/AppointmentDetails';\n// import useMounted from '../../../../hooks/useMounted';\nimport ChevronRightIcon from '../../../../icons/ChevronRight';\n// import PencilAltIcon from '../../../icons/PencilAlt';\nimport gtm from '../../../../lib/gtm';\nimport useSettings from '../../../../hooks/useSettings';\nimport firebase from '../../../../lib/firebase';\nimport useAuth from '../../../../hooks/useAuth';\n\nconst tabs = [\n  { label: 'Vehículo', value: 'details' },\n  // { label: 'Ordenes', value: 'logs' }\n];\n\nconst AppointmentsDetails = () => {\n  const { settings } = useSettings();\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const [vehicle, setVehicle] = useState({});\n  const [currentTab, setCurrentTab] = useState('details');\n  const { id } = useParams();\n  const [isSubmit, setIsSubmit] = useState(false);\n\n  const getVehicle = () => {\n    firebase\n      .firestore()\n      .collection('workshop_appointments')\n      .doc(id)\n      .get()\n      .then((doc) => {\n        console.log(doc.data());\n        setVehicle({ ...doc.data(), id: doc.id });\n        console.log(vehicle);\n      });\n  };\n\n  useEffect(() => {\n    console.log(id);\n    firebase\n      .firestore()\n      .collection('staff')\n      .doc(user.id)\n      .get()\n      .then((snap) => {\n        if (snap.data().rank.id === 'dealership_agent') {\n          navigate('/dashboard');\n        }\n      });\n    getVehicle();\n    gtm.push({ event: 'page_view' });\n  }, []);\n\n  // const getCustomer = useCallback(async () => {\n  //   try {\n  //     const data = await customerApi.getCustomer();\n\n  //     if (mounted.current) {\n  //       setCustomer(data);\n  //     }\n  //   } catch (err) {\n  //     console.error(err);\n  //   }\n  // }, [mounted]);\n\n  // useEffect(() => {\n  //   getCustomer();\n  // }, [getCustomer]);\n\n  const handleTabsChange = (event, value) => {\n    setCurrentTab(value);\n  };\n\n  if (!vehicle) {\n    return null;\n  }\n\n  return (\n    <>\n      <Helmet>\n        <title>Dashboard: Detalle de la Cita | Mac Admin</title>\n      </Helmet>\n      <Box\n        sx={{\n          backgroundColor: 'background.default',\n          minHeight: '100%',\n          py: 8\n        }}\n      >\n        <Container maxWidth={settings.compact ? 'xl' : false}>\n          <Grid\n            container\n            justifyContent=\"space-between\"\n            spacing={3}\n          >\n            <Grid item>\n              <Typography\n                color=\"textPrimary\"\n                variant=\"h5\"\n              >\n                {vehicle.name}\n              </Typography>\n              <Breadcrumbs\n                aria-label=\"breadcrumb\"\n                separator={<ChevronRightIcon fontSize=\"small\" />}\n                sx={{ mt: 1 }}\n              >\n                <Link\n                  color=\"textPrimary\"\n                  component={RouterLink}\n                  to=\"/dashboard\"\n                  variant=\"subtitle2\"\n                >\n                  Dashboard\n                </Link>\n                <Link\n                  color=\"textPrimary\"\n                  component={RouterLink}\n                  to=\"/dashboard/taller/citas\"\n                  variant=\"subtitle2\"\n                >\n                  Lista de Citas\n                </Link>\n                <Typography\n                  color=\"textSecondary\"\n                  variant=\"subtitle2\"\n                >\n                  Detalle de Cita\n                </Typography>\n              </Breadcrumbs>\n            </Grid>\n            {/* <Grid item>\n              <Box sx={{ m: -1 }}>\n                <Button\n                  color=\"primary\"\n                  component={RouterLink}\n                  startIcon={<PencilAltIcon fontSize=\"small\" />}\n                  sx={{ m: 1 }}\n                  to=\"/dashboard/customers/1/edit\"\n                  variant=\"contained\"\n                >\n                  Edit\n                </Button>\n              </Box>\n            </Grid> */}\n          </Grid>\n          <Box sx={{ mt: 3 }}>\n            <Tabs\n              indicatorColor=\"primary\"\n              onChange={handleTabsChange}\n              scrollButtons=\"auto\"\n              textColor=\"primary\"\n              value={currentTab}\n              variant=\"scrollable\"\n            >\n              {tabs.map((tab) => (\n                <Tab\n                  key={tab.value}\n                  label={tab.label}\n                  value={tab.value}\n                />\n              ))}\n            </Tabs>\n          </Box>\n          <Divider />\n          <Box sx={{ mt: 3 }}>\n            {currentTab === 'details' && (\n              <Grid\n                container\n                spacing={3}\n              >\n                <Grid\n                  item\n                  lg={settings.compact ? 8 : 4}\n                  md={6}\n                  xl={settings.compact ? 8 : 3}\n                  xs={12}\n                >\n                  <AppointmentDetails\n                    brandName={vehicle.brand}\n                    modelName={vehicle.model}\n                    color={vehicle.year}\n                    client={vehicle.name}\n                    description={vehicle.description}\n                    km={vehicle.km}\n                    phone={vehicle.phone}\n                  />\n                </Grid>\n                <Grid item>\n                  <Box sx={{ m: -1 }}>\n                    <Button\n                      color=\"primary\"\n                      startIcon={<CheckIcon fontSize=\"small\" />}\n                      sx={{ m: 1 }}\n                      disabled={isSubmit}\n                      variant=\"contained\"\n                      onClick={() => {\n                        setIsSubmit(true);\n                        firebase\n                          .firestore()\n                          .collection('workshop_appointments')\n                          .doc(id)\n                          .delete()\n                          .then(() => {\n                            toast.success('Cita Completada!');\n                            setIsSubmit(false);\n                            navigate('/dashboard/taller/citas');\n                          });\n                      }}\n                    >\n                      Completar Cita\n                    </Button>\n                  </Box>\n                </Grid>\n              </Grid>\n            )}\n          </Box>\n        </Container>\n      </Box>\n    </>\n  );\n};\n\nexport default AppointmentsDetails;\n","import createSvgIcon from '@material-ui/core/utils/createSvgIcon';\n\nconst Check = createSvgIcon(\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 20 20\"\n    fill=\"currentColor\"\n  >\n    <path\n      fillRule=\"evenodd\"\n      d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\"\n      clipRule=\"evenodd\"\n    />\n  </svg>, 'Check'\n);\n\nexport default Check;\n"],"sourceRoot":""}