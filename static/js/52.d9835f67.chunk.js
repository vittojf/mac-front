(this.webpackJsonpMac=this.webpackJsonpMac||[]).push([[52],{1032:function(e,t,a){"use strict";a.r(t);var c=a(22),n=a(23),r=a(15),s=a(12),i=a.n(s),l=a(0),o=a(29),j=a(36),d=a(142),b=a(473),u=a(547),h=a(932),O=a(550),x=a(665),p=a(555),f=a(88),m=a(584),v=a.n(m),g=a(548),w=a(528),C=a(670),k=a(671),y=a(545),S=a(1036),P=a(1040),M=a(1038),A=a(1039),z=a(1037),R=a(546),E=a(1022),I=a(570),L=a(580),W=a(213),B=a(1),D=["customers"],_=[{label:"M\xe1s recientes",value:"updatedAt|desc"},{label:"Menos recientes",value:"updatedAt|asc"},{label:"Total",value:"orders|desc"},{label:"Total",value:"orders|asc"}],H=function(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0},J=function(e,t){var a=t.split("|"),c=Object(r.a)(a,2),n=c[0],s=function(e,t){return"desc"===e?function(e,a){return H(e,a,t)}:function(e,a){return-H(e,a,t)}}(c[1],n),i=e.map((function(e,t){return[e,t]}));return i.sort((function(e,t){var a=s(e[0],t[0]);return 0!==a?a:e[1]-t[1]})),i.map((function(e){return e[0]}))},T=function(e){var t=e.customers,a=Object(f.a)(e,D),c=Object(l.useState)([]),s=Object(r.a)(c,2),i=s[0],o=s[1],d=Object(l.useState)(0),u=Object(r.a)(d,2),h=u[0],x=u[1],m=Object(l.useState)(5),H=Object(r.a)(m,2),T=H[0],F=H[1],K=Object(l.useState)(""),q=Object(r.a)(K,2),G=q[0],N=q[1],Q=Object(l.useState)(_[0].value),U=Object(r.a)(Q,2),V=U[0],X=U[1],Y=Object(l.useState)({hasAcceptedMarketing:null,isProspect:null,isReturning:null}),Z=Object(r.a)(Y,1)[0],$=function(e,t,a){return e.filter((function(e){var c=!0;if(t){var n=!1;["brand","model","name"].forEach((function(a){e[a].toLowerCase().includes(t.toLowerCase())&&(n=!0)})),n||(c=!1)}return Object.keys(a).forEach((function(t){var n=a[t];n&&e[t]!==n&&(c=!1)})),c}))}(t,G,Z),ee=function(e,t,a){return e.slice(t*a,t*a+a)}(J($,V),h,T),te=i.length>0,ae=i.length>0&&i.length<t.length,ce=i.length===t.length;return Object(B.jsxs)(g.a,Object(n.a)(Object(n.a)({},a),{},{children:[Object(B.jsxs)(b.a,{sx:{alignItems:"center",display:"flex",flexWrap:"wrap",m:-1,p:2},children:[Object(B.jsx)(b.a,{sx:{m:1,maxWidth:"100%",width:500},children:Object(B.jsx)(w.a,{fullWidth:!0,InputProps:{startAdornment:Object(B.jsx)(C.a,{position:"start",children:Object(B.jsx)(L.a,{fontSize:"small"})})},onChange:function(e){N(e.target.value)},placeholder:"Buscar...",value:G,variant:"outlined"})}),Object(B.jsx)(b.a,{sx:{m:1,width:240},children:Object(B.jsx)(w.a,{label:"Ordenar Por",name:"sort",onChange:function(e){X(e.target.value)},select:!0,SelectProps:{native:!0},value:V,variant:"outlined",children:_.map((function(e){return Object(B.jsx)("option",{value:e.value,children:e.label},e.value)}))})})]}),te&&Object(B.jsx)(b.a,{sx:{position:"relative"},children:Object(B.jsxs)(b.a,{sx:{backgroundColor:"background.paper",mt:"6px",position:"absolute",px:"4px",width:"100%",zIndex:2},children:[Object(B.jsx)(k.a,{checked:ce,color:"primary",indeterminate:ae,onChange:function(e){o(e.target.checked?t.map((function(e){return e.id})):[])}}),Object(B.jsx)(y.a,{color:"primary",sx:{ml:2},variant:"outlined",children:"Delete"}),Object(B.jsx)(y.a,{color:"primary",sx:{ml:2},variant:"outlined",children:"Edit"})]})}),Object(B.jsx)(W.a,{children:Object(B.jsx)(b.a,{sx:{minWidth:700},children:Object(B.jsxs)(S.a,{children:[Object(B.jsx)(P.a,{children:Object(B.jsxs)(M.a,{children:[Object(B.jsx)(A.a,{children:"Modelo"}),Object(B.jsx)(A.a,{children:"Cliente"}),Object(B.jsx)(A.a,{children:"A\xf1o"}),Object(B.jsx)(A.a,{children:"Kilometraje"}),Object(B.jsx)(A.a,{align:"right",children:"Acciones"})]})}),Object(B.jsx)(z.a,{children:ee.map((function(e){var t=i.includes(e.id);return Object(B.jsxs)(M.a,{hover:!0,selected:t,children:[Object(B.jsx)(A.a,{children:Object(B.jsx)(b.a,{sx:{alignItems:"center",display:"flex"},children:Object(B.jsxs)(b.a,{sx:{ml:1},children:[Object(B.jsx)(p.a,{color:"inherit",component:j.b,to:"/dashboard/taller/citas/detalles/".concat(e.id),variant:"subtitle2",children:e.model}),Object(B.jsx)(O.a,{color:"textSecondary",variant:"body2",children:e.brand})]})})}),Object(B.jsx)(A.a,{children:"".concat(e.name)}),Object(B.jsx)(A.a,{children:e.year}),Object(B.jsx)(A.a,{children:v()(e.km).format("0,0.00")}),Object(B.jsx)(A.a,{align:"right",children:Object(B.jsx)(R.a,{component:j.b,to:"/dashboard/taller/citas/detalles/".concat(e.id),children:Object(B.jsx)(I.a,{fontSize:"small"})})})]},e.id)}))})]})})}),Object(B.jsx)(E.a,{component:"div",count:$.length,onPageChange:function(e,t){x(t)},onRowsPerPageChange:function(e){F(parseInt(e.target.value,10))},page:h,rowsPerPage:T,rowsPerPageOptions:[5,10,25]})]}))},F=a(89),K=a(217),q=a(216),G=a(141),N=a(214),Q=a(41),U=a(91);t.default=function(){var e=Object(F.a)(),t=Object(q.a)().settings,a=Object(l.useState)([]),s=Object(r.a)(a,2),f=s[0],m=s[1],v=Object(Q.a)().user,g=Object(o.g)();Object(l.useEffect)((function(){N.a.firestore().collection("staff").doc(v.id).get().then((function(e){"dealership_agent"===e.data().rank.id&&g("/dashboard")})),N.a.firestore().collection("workshop_appointments").get().then((function(e){var t=[];e.forEach((function(e){t.push(Object(n.a)(Object(n.a)({},e.data()),{},{id:e.id,avatar:U.a}))})),console.log(t),m(t)})),G.a.push({event:"page_view"})}),[]);var w=Object(l.useCallback)(Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{m([])}catch(t){console.error(t)}case 1:case"end":return e.stop()}}),e)}))),[e]);return Object(l.useEffect)((function(){w()}),[w]),Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(d.a,{children:Object(B.jsx)("title",{children:"Dashboard: Citas | Mac Admin"})}),Object(B.jsx)(b.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:8},children:Object(B.jsxs)(u.a,{maxWidth:!!t.compact&&"xl",children:[Object(B.jsx)(h.a,{container:!0,justifyContent:"space-between",spacing:3,children:Object(B.jsxs)(h.a,{item:!0,children:[Object(B.jsx)(O.a,{color:"textPrimary",variant:"h5",children:"Lista de Citas"}),Object(B.jsxs)(x.a,{"aria-label":"breadcrumb",separator:Object(B.jsx)(K.a,{fontSize:"small"}),sx:{mt:1},children:[Object(B.jsx)(p.a,{color:"textPrimary",component:j.b,to:"/dashboard",variant:"subtitle2",children:"Dashboard"}),Object(B.jsx)(O.a,{color:"textSecondary",variant:"subtitle2",children:"Lista de Citas"})]})]})}),Object(B.jsx)(b.a,{sx:{mt:3},children:Object(B.jsx)(T,{customers:f})})]})})]})}},570:function(e,t,a){"use strict";var c=a(31),n=a(1),r=Object(c.a)(Object(n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(n.jsx)("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})}),"ArrowRight");t.a=r},580:function(e,t,a){"use strict";var c=a(31),n=a(1),r=Object(c.a)(Object(n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(n.jsx)("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})}),"Search");t.a=r}}]);
//# sourceMappingURL=52.d9835f67.chunk.js.map