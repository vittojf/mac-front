(this.webpackJsonpMac=this.webpackJsonpMac||[]).push([[34],{1004:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(29),i=a(36),c=a(142),l=a(473),s=a(547),o=a(932),d=a(550),u=a(665),j=a(555),b=a(545),h=a(915),m=a(216),x=a(668),O=a(217),p=a(141),v=a(214),g=a(41),f=a(1);t.default=function(){var e=Object(m.a)().settings,t=Object(g.a)().user,a=Object(r.g)();return Object(n.useEffect)((function(){p.a.push({event:"page_view"}),v.a.firestore().collection("staff").doc(t.id).get().then((function(e){"dealership_agent"===e.data().rank.id&&a("/dashboard")}))}),[]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(c.a,{children:Object(f.jsx)("title",{children:"Dashboard: Crear Clientes | Mac Admin"})}),Object(f.jsx)(l.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:8},children:Object(f.jsxs)(s.a,{maxWidth:!!e.compact&&"xl",children:[Object(f.jsxs)(o.a,{container:!0,justifyContent:"space-between",spacing:3,children:[Object(f.jsxs)(o.a,{item:!0,children:[Object(f.jsx)(d.a,{color:"textPrimary",variant:"h5",children:"Agregar Cliente"}),Object(f.jsxs)(u.a,{"aria-label":"breadcrumb",separator:Object(f.jsx)(O.a,{fontSize:"small"}),sx:{mt:1},children:[Object(f.jsx)(j.a,{color:"textPrimary",component:i.b,to:"/dashboard",variant:"subtitle2",children:"Dashboard"}),Object(f.jsx)(j.a,{color:"textPrimary",component:i.b,to:"/dashboard/taller/clientes",variant:"subtitle2",children:"Listado de Clientes"}),Object(f.jsx)(d.a,{color:"textSecondary",variant:"subtitle2",children:"Agregar Cliente"})]})]}),Object(f.jsx)(o.a,{item:!0,children:Object(f.jsx)(l.a,{sx:{m:-1},children:Object(f.jsx)(b.a,{color:"primary",component:i.b,startIcon:Object(f.jsx)(x.a,{fontSize:"small"}),sx:{mt:1},to:"/dashboard/taller/clientes",variant:"outlined",children:"Cancelar"})})})]}),Object(f.jsx)(l.a,{sx:{mt:3},children:Object(f.jsx)(h.a,{})})]})})]})}},570:function(e,t,a){"use strict";var n=a(31),r=a(1),i=Object(n.a)(Object(r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(r.jsx)("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})}),"ArrowRight");t.a=i},580:function(e,t,a){"use strict";var n=a(31),r=a(1),i=Object(n.a)(Object(r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(r.jsx)("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})}),"Search");t.a=i},668:function(e,t,a){"use strict";var n=a(31),r=a(1),i=Object(n.a)(Object(r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(r.jsx)("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"ArrowLeft");t.a=i},915:function(e,t,a){"use strict";a.d(t,"b",(function(){return I})),a.d(t,"a",(function(){return J}));var n=a(23),r=a(88),i=a(15),c=a(0),l=a(36),s=a(548),o=a(473),d=a(528),u=a(670),j=a(671),b=a(545),h=a(1036),m=a(1040),x=a(1038),O=a(1039),p=a(1037),v=a(536),g=a(555),f=a(546),y=a(1022),w=a(570),C=a(580),S=a(144),k=a(213),A=a(1),B=["customers"],P=[{label:"M\xe1s recientes",value:"updatedAt|desc"},{label:"Menos recientes",value:"updatedAt|asc"},{label:"Total",value:"orders|desc"},{label:"Total",value:"orders|asc"}],R=function(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0},T=function(e,t){var a=t.split("|"),n=Object(i.a)(a,2),r=n[0],c=function(e,t){return"desc"===e?function(e,a){return R(e,a,t)}:function(e,a){return-R(e,a,t)}}(n[1],r),l=e.map((function(e,t){return[e,t]}));return l.sort((function(e,t){var a=c(e[0],t[0]);return 0!==a?a:e[1]-t[1]})),l.map((function(e){return e[0]}))},I=function(e){var t=e.customers,a=Object(r.a)(e,B),R=Object(c.useState)([]),I=Object(i.a)(R,2),W=I[0],M=I[1],z=Object(c.useState)(0),E=Object(i.a)(z,2),q=E[0],L=E[1],D=Object(c.useState)(5),F=Object(i.a)(D,2),H=F[0],V=F[1],N=Object(c.useState)(""),_=Object(i.a)(N,2),J=_[0],G=_[1],K=Object(c.useState)(P[0].value),Q=Object(i.a)(K,2),U=Q[0],X=Q[1],Y=Object(c.useState)({hasAcceptedMarketing:null,isProspect:null,isReturning:null}),Z=Object(i.a)(Y,1)[0],$=function(e,t,a){return e.filter((function(e){var n=!0;if(t){var r=!1;["email","name"].forEach((function(a){e[a].toLowerCase().includes(t.toLowerCase())&&(r=!0)})),r||(n=!1)}return Object.keys(a).forEach((function(t){var r=a[t];r&&e[t]!==r&&(n=!1)})),n}))}(t,J,Z),ee=function(e,t,a){return e.slice(t*a,t*a+a)}(T($,U),q,H),te=W.length>0,ae=W.length>0&&W.length<t.length,ne=W.length===t.length;return Object(A.jsxs)(s.a,Object(n.a)(Object(n.a)({},a),{},{children:[Object(A.jsxs)(o.a,{sx:{alignItems:"center",display:"flex",flexWrap:"wrap",m:-1,p:2},children:[Object(A.jsx)(o.a,{sx:{m:1,maxWidth:"100%",width:500},children:Object(A.jsx)(d.a,{fullWidth:!0,InputProps:{startAdornment:Object(A.jsx)(u.a,{position:"start",children:Object(A.jsx)(C.a,{fontSize:"small"})})},onChange:function(e){G(e.target.value)},placeholder:"Buscar...",value:J,variant:"outlined"})}),Object(A.jsx)(o.a,{sx:{m:1,width:240},children:Object(A.jsx)(d.a,{label:"Ordenar Por",name:"sort",onChange:function(e){X(e.target.value)},select:!0,SelectProps:{native:!0},value:U,variant:"outlined",children:P.map((function(e){return Object(A.jsx)("option",{value:e.value,children:e.label},e.value)}))})})]}),te&&Object(A.jsx)(o.a,{sx:{position:"relative"},children:Object(A.jsxs)(o.a,{sx:{backgroundColor:"background.paper",mt:"6px",position:"absolute",px:"4px",width:"100%",zIndex:2},children:[Object(A.jsx)(j.a,{checked:ne,color:"primary",indeterminate:ae,onChange:function(e){M(e.target.checked?t.map((function(e){return e.id})):[])}}),Object(A.jsx)(b.a,{color:"primary",sx:{ml:2},variant:"outlined",children:"Delete"}),Object(A.jsx)(b.a,{color:"primary",sx:{ml:2},variant:"outlined",children:"Edit"})]})}),Object(A.jsx)(k.a,{children:Object(A.jsx)(o.a,{sx:{minWidth:700},children:Object(A.jsxs)(h.a,{children:[Object(A.jsx)(m.a,{children:Object(A.jsxs)(x.a,{children:[Object(A.jsx)(O.a,{children:"Nombre"}),Object(A.jsx)(O.a,{children:"Identificaci\xf3n"}),Object(A.jsx)(O.a,{children:"Email"}),Object(A.jsx)(O.a,{children:"Tel\xe9fono"}),Object(A.jsx)(O.a,{children:"Cant. Veh\xedculos"}),Object(A.jsx)(O.a,{children:"Cant. \xd3rdenes"}),Object(A.jsx)(O.a,{align:"right",children:"Acciones"})]})}),Object(A.jsx)(p.a,{children:ee.map((function(e){var t=W.includes(e.id);return Object(A.jsxs)(x.a,{hover:!0,selected:t,children:[Object(A.jsx)(O.a,{children:Object(A.jsxs)(o.a,{sx:{alignItems:"center",display:"flex"},children:[Object(A.jsx)(v.a,{src:e.avatar2,sx:{height:42,width:42},children:Object(S.a)(e.name)}),Object(A.jsx)(o.a,{sx:{ml:1},children:Object(A.jsx)(g.a,{color:"inherit",component:l.b,to:"/dashboard/taller/clientes/detalles/".concat(e.id),variant:"subtitle2",children:e.name})})]})}),Object(A.jsx)(O.a,{children:"".concat(e.identification.number)}),Object(A.jsx)(O.a,{children:"".concat(e.email)}),Object(A.jsx)(O.a,{children:e.phone}),Object(A.jsx)(O.a,{children:e.vehicles.length}),Object(A.jsx)(O.a,{children:e.orders.length}),Object(A.jsx)(O.a,{align:"right",children:Object(A.jsx)(f.a,{component:l.b,to:"/dashboard/taller/clientes/detalles/".concat(e.id),children:Object(A.jsx)(w.a,{fontSize:"small"})})})]},e.id)}))})]})})}),Object(A.jsx)(y.a,{component:"div",count:$.length,onPageChange:function(e,t){L(t)},onRowsPerPageChange:function(e){V(parseInt(e.target.value,10))},page:q,rowsPerPage:H,rowsPerPageOptions:[5,10,25]})]}))},W=a(22),M=a(12),z=a.n(M),E=a(29),q=a(143),L=a(61),D=a(114),F=a(932),H=a(549),V=a(544),N=a(214),_=[{value:"",id:""},{value:"Cedula",id:"Cedula"},{id:"RIF",value:"RIF"}],J=function(e){var t=Object(E.g)();return Object(A.jsx)(D.a,{initialValues:{key:"",name:"",phone:0,number:0,type:"",email:"",address:"",date:{registered:null,lastActivity:null},orders:[],vehicles:[],pin:"0000",rating:5,status:"0"},validationSchema:L.f().shape({key:L.h().max(255),name:L.h().max(255).required(),phone:L.e().min(0).required(),type:L.h().max(255).required(),number:L.e().min(0).required(),email:L.h().max(255).required(),address:L.h().max(255).required()}),onSubmit:function(){var e=Object(W.a)(z.a.mark((function e(a,n){var r,i,c,l;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.setErrors,i=n.setStatus,c=n.setSubmitting,e.prev=1,console.log("EN save"),a.date.registered=N.a.firestore.FieldValue.serverTimestamp(),a.date.lastActivity=N.a.firestore.FieldValue.serverTimestamp(),console.log(a.email),l=N.b.httpsCallable("prueba"),e.abrupt("return",l(a.email).then((function(e){console.log(e),a.key=e.data;var n={identification:{number:a.number,type:a.type},key:a.key,phone:a.phone,name:a.name,type:a.type,email:a.email,address:a.address,date:{registered:a.date.registered,lastActivity:a.date.lastActivity},orders:a.orders,vehicles:a.vehicles,pin:a.pin,rating:a.rating,status:a.status};console.log(n),N.a.firestore().collection("workshop_clients").add(n).then((function(){return q.b.success("Cliente Registrado","Se ha registrado al cliente ".concat(a.name," exitosamente!")),i({success:!0}),c(!1),t("/dashboard/taller/clientes"),!0}))})).catch((function(e){return console.error(e),q.b.error("Something went wrong!"),i({success:!1}),r({submit:e.message}),c(!1),!0})));case 10:return e.prev=10,e.t0=e.catch(1),console.error(e.t0),q.b.error("Something went wrong!"),i({success:!1}),r({submit:e.t0.message}),c(!1),e.abrupt("return",!0);case 18:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a){return e.apply(this,arguments)}}(),children:function(t){var a=t.errors,r=t.handleBlur,i=t.handleChange,c=t.handleSubmit,l=t.isSubmitting,u=t.touched,j=t.values;return Object(A.jsx)("form",Object(n.a)(Object(n.a)({onSubmit:c},e),{},{children:Object(A.jsxs)(F.a,{container:!0,spacing:3,children:[Object(A.jsx)(F.a,{item:!0,lg:12,md:12,xs:12,children:Object(A.jsx)(s.a,{children:Object(A.jsx)(H.a,{children:Object(A.jsxs)(F.a,{container:!0,spacing:3,children:[Object(A.jsx)(F.a,{item:!0,md:6,xs:12,children:Object(A.jsx)(d.a,{error:Boolean(u.name&&a.name),fullWidth:!0,helperText:u.name&&a.name,label:"Nombre y Apellido",name:"name",type:"text",onBlur:r,onChange:i,value:j.name,variant:"outlined"})}),Object(A.jsx)(F.a,{item:!0,md:6,xs:12,children:Object(A.jsx)(d.a,{error:Boolean(u.phone&&a.phone),fullWidth:!0,helperText:u.phone&&a.phone,label:"Tel\xe9fono",name:"phone",type:"number",onBlur:r,onChange:i,value:j.phone,variant:"outlined"})}),Object(A.jsx)(F.a,{item:!0,md:6,xs:12,children:Object(A.jsx)(d.a,{fullWidth:!0,label:"Tipo de ID",name:"type",onChange:i,select:!0,SelectProps:{native:!0},value:j.type,variant:"outlined",children:_.map((function(e){return Object(A.jsx)("option",{value:e.id,children:e.value},e.id)}))})}),Object(A.jsx)(F.a,{item:!0,md:6,xs:12,children:Object(A.jsx)(d.a,{error:Boolean(u.number&&a.number),fullWidth:!0,helperText:u.number&&a.number,label:"ID",name:"number",type:"number",onBlur:r,onChange:i,value:j.number,variant:"outlined"})}),Object(A.jsx)(F.a,{item:!0,md:6,xs:12,children:Object(A.jsx)(d.a,{error:Boolean(u.email&&a.email),fullWidth:!0,helperText:u.email&&a.email,label:"Email",name:"email",type:"email",onBlur:r,onChange:i,value:j.email,variant:"outlined"})}),Object(A.jsx)(F.a,{item:!0,md:6,xs:12,children:Object(A.jsx)(d.a,{error:Boolean(u.address&&a.address),fullWidth:!0,helperText:u.address&&a.address,label:"Address",name:"address",type:"text",onBlur:r,onChange:i,value:j.address,variant:"outlined"})})]})})})}),Object(A.jsxs)(F.a,{item:!0,lg:2,md:2,xs:12,children:[a.submit&&Object(A.jsx)(o.a,{sx:{mt:3},children:Object(A.jsx)(V.a,{error:!0,children:a.submit})}),Object(A.jsx)(o.a,{sx:{display:"flex",justifyContent:"flex-end",mt:3},children:Object(A.jsx)(b.a,{color:"primary",disabled:l,type:"submit",variant:"contained",children:"Registrar Cliente"})})]})]})}))}})};a(550),a(734),a(551),a(91)}}]);
//# sourceMappingURL=34.cc149d25.chunk.js.map