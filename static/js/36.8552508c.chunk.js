(this.webpackJsonpMac=this.webpackJsonpMac||[]).push([[36],{1008:function(e,t,a){"use strict";a.r(t);var c=a(22),n=a(23),r=a(15),s=a(12),i=a.n(s),l=a(0),o=a(29),d=a(36),j=a(142),b=a(473),u=a(547),h=a(932),O=a(550),x=a(665),v=a(555),p=a(545),f=a(1019),m=a(1041),g=a(730),w=a(89),y=a(217),S=a(630),C=a(216),k=a(141),P=a(214),A=a(41),M=a(1),z=[{label:"Activos",value:"activos"},{label:"Inactivos",value:"inactivos"}];t.default=function(){var e=Object(w.a)(),t=Object(C.a)().settings,a=Object(l.useState)("activos"),s=Object(r.a)(a,2),R=s[0],_=s[1],E=Object(l.useState)([]),B=Object(r.a)(E,2),I=B[0],D=B[1],L=Object(l.useState)([]),W=Object(r.a)(L,2),H=W[0],J=W[1],T=Object(A.a)().user,F=Object(o.g)();Object(l.useEffect)((function(){P.a.firestore().collection("staff").doc(T.id).get().then((function(e){"dealership_agent"===e.data().rank.id&&F("/dashboard")})),P.a.firestore().collection("/workshop_orders/active/orders").orderBy("date","desc").get().then((function(e){var t=[];e.forEach((function(e){t.push(Object(n.a)(Object(n.a)({},e.data()),{},{id:e.id}))})),console.log(t),D(t)})),P.a.firestore().collection("/workshop_orders/inactive/orders").orderBy("date","desc").get().then((function(e){var t=[];e.forEach((function(e){t.push(Object(n.a)(Object(n.a)({},e.data()),{},{id:e.id}))})),console.log(t),J(t)})),k.a.push({event:"page_view"})}),[]);var V=Object(l.useCallback)(Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{D([])}catch(t){console.error(t)}case 1:case"end":return e.stop()}}),e)}))),[e]);return Object(l.useEffect)((function(){V()}),[V]),Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(j.a,{children:Object(M.jsx)("title",{children:"Dashboard: Ordenes | Mac Admin"})}),Object(M.jsx)(b.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:8},children:Object(M.jsxs)(u.a,{maxWidth:!!t.compact&&"xl",children:[Object(M.jsxs)(h.a,{container:!0,justifyContent:"space-between",spacing:3,children:[Object(M.jsxs)(h.a,{item:!0,children:[Object(M.jsx)(O.a,{color:"textPrimary",variant:"h5",children:"Lista de Ordenes"}),Object(M.jsxs)(x.a,{"aria-label":"breadcrumb",separator:Object(M.jsx)(y.a,{fontSize:"small"}),sx:{mt:1},children:[Object(M.jsx)(v.a,{color:"textPrimary",component:d.b,to:"/dashboard",variant:"subtitle2",children:"Dashboard"}),Object(M.jsx)(O.a,{color:"textSecondary",variant:"subtitle2",children:"Ordenes"})]})]}),Object(M.jsx)(h.a,{item:!0,children:Object(M.jsx)(b.a,{sx:{m:-1},children:Object(M.jsx)(p.a,{color:"primary",startIcon:Object(M.jsx)(S.a,{fontSize:"small"}),sx:{m:1},component:d.b,variant:"contained",to:"/dashboard/taller/ordenes/crear",children:"Agregar Orden"})})})]}),Object(M.jsxs)(b.a,{sx:{mt:3},children:[Object(M.jsx)(b.a,{sx:{mb:3},children:Object(M.jsx)(f.a,{indicatorColor:"primary",onChange:function(e,t){_(t)},scrollButtons:"auto",textColor:"primary",value:R,variant:"scrollable",children:z.map((function(e){return Object(M.jsx)(m.a,{label:e.label,value:e.value},e.value)}))})}),"activos"===R&&Object(M.jsx)(g.a,{active:"0",customers:I}),"inactivos"===R&&Object(M.jsx)(g.a,{active:"1",customers:H})]})]})})]})}},570:function(e,t,a){"use strict";var c=a(31),n=a(1),r=Object(c.a)(Object(n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(n.jsx)("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})}),"ArrowRight");t.a=r},580:function(e,t,a){"use strict";var c=a(31),n=a(1),r=Object(c.a)(Object(n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(n.jsx)("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})}),"Search");t.a=r},630:function(e,t,a){"use strict";var c=a(31),n=a(1),r=Object(c.a)(Object(n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(n.jsx)("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"Plus");t.a=r},730:function(e,t,a){"use strict";var c=a(23),n=a(88),r=a(15),s=a(0),i=a(36),l=a(548),o=a(473),d=a(528),j=a(670),b=a(671),u=a(545),h=a(1036),O=a(1040),x=a(1038),v=a(1039),p=a(1037),f=a(536),m=a(555),g=a(550),w=a(546),y=a(1022),S=a(570),C=a(580),k=a(144),P=a(213),A=a(1),M=["active","customers"],z=[{label:"M\xe1s recientes",value:"updatedAt|desc"},{label:"Menos recientes",value:"updatedAt|asc"},{label:"Total",value:"orders|desc"},{label:"Total",value:"orders|asc"}],R=function(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0},_=function(e,t){var a=t.split("|"),c=Object(r.a)(a,2),n=c[0],s=function(e,t){return"desc"===e?function(e,a){return R(e,a,t)}:function(e,a){return-R(e,a,t)}}(c[1],n),i=e.map((function(e,t){return[e,t]}));return i.sort((function(e,t){var a=s(e[0],t[0]);return 0!==a?a:e[1]-t[1]})),i.map((function(e){return e[0]}))};t.a=function(e){var t=e.active,a=e.customers,R=Object(n.a)(e,M),E=Object(s.useState)([]),B=Object(r.a)(E,2),I=B[0],D=B[1],L=Object(s.useState)(0),W=Object(r.a)(L,2),H=W[0],J=W[1],T=Object(s.useState)(5),F=Object(r.a)(T,2),V=F[0],q=F[1],G=Object(s.useState)(""),K=Object(r.a)(G,2),N=K[0],Q=K[1],U=Object(s.useState)(z[0].value),X=Object(r.a)(U,2),Y=X[0],Z=X[1],$=Object(s.useState)({hasAcceptedMarketing:null,isProspect:null,isReturning:null}),ee=Object(r.a)($,1)[0],te=function(e,t,a){return e.filter((function(e){var c=!0;if(t){var n=!1;["brand","client_name","model","tag","employee"].forEach((function(a){e[a].toLowerCase().includes(t.toLowerCase())&&(n=!0)})),n||(c=!1)}return Object.keys(a).forEach((function(t){var n=a[t];n&&e[t]!==n&&(c=!1)})),c}))}(a,N,ee),ae=function(e,t,a){return e.slice(t*a,t*a+a)}(_(te,Y),H,V),ce=I.length>0,ne=I.length>0&&I.length<a.length,re=I.length===a.length;return Object(A.jsxs)(l.a,Object(c.a)(Object(c.a)({},R),{},{children:[Object(A.jsxs)(o.a,{sx:{alignItems:"center",display:"flex",flexWrap:"wrap",m:-1,p:2},children:[Object(A.jsx)(o.a,{sx:{m:1,maxWidth:"100%",width:500},children:Object(A.jsx)(d.a,{fullWidth:!0,InputProps:{startAdornment:Object(A.jsx)(j.a,{position:"start",children:Object(A.jsx)(C.a,{fontSize:"small"})})},onChange:function(e){Q(e.target.value)},placeholder:"Buscar...",value:N,variant:"outlined"})}),Object(A.jsx)(o.a,{sx:{m:1,width:240},children:Object(A.jsx)(d.a,{label:"Ordenar Por",name:"sort",onChange:function(e){Z(e.target.value)},select:!0,SelectProps:{native:!0},value:Y,variant:"outlined",children:z.map((function(e){return Object(A.jsx)("option",{value:e.value,children:e.label},e.value)}))})})]}),ce&&Object(A.jsx)(o.a,{sx:{position:"relative"},children:Object(A.jsxs)(o.a,{sx:{backgroundColor:"background.paper",mt:"6px",position:"absolute",px:"4px",width:"100%",zIndex:2},children:[Object(A.jsx)(b.a,{checked:re,color:"primary",indeterminate:ne,onChange:function(e){D(e.target.checked?a.map((function(e){return e.id})):[])}}),Object(A.jsx)(u.a,{color:"primary",sx:{ml:2},variant:"outlined",children:"Delete"}),Object(A.jsx)(u.a,{color:"primary",sx:{ml:2},variant:"outlined",children:"Edit"})]})}),Object(A.jsx)(P.a,{children:Object(A.jsx)(o.a,{sx:{minWidth:700},children:Object(A.jsxs)(h.a,{children:[Object(A.jsx)(O.a,{children:Object(A.jsxs)(x.a,{children:[Object(A.jsx)(v.a,{children:"Modelo"}),Object(A.jsx)(v.a,{children:"Placa"}),Object(A.jsx)(v.a,{children:"Due\xf1o"}),Object(A.jsx)(v.a,{children:"Empleado"}),Object(A.jsx)(v.a,{children:"\xdaltima Actividad"}),Object(A.jsx)(v.a,{align:"right",children:"Acciones"})]})}),Object(A.jsx)(p.a,{children:ae.map((function(e){var a=I.includes(e.id);return Object(A.jsxs)(x.a,{hover:!0,selected:a,children:[Object(A.jsx)(v.a,{children:Object(A.jsxs)(o.a,{sx:{alignItems:"center",display:"flex"},children:[Object(A.jsx)(f.a,{src:e.logo,sx:{height:42,width:42},children:Object(k.a)(e.model_name)}),Object(A.jsxs)(o.a,{sx:{ml:1},children:[Object(A.jsx)(m.a,{color:"inherit",component:i.b,to:"/dashboard/taller/ordenes/detalles/".concat(e.id),variant:"subtitle2",children:e.model_name}),Object(A.jsx)(g.a,{color:"textSecondary",variant:"body2",children:e.brand_name})]})]})}),Object(A.jsx)(v.a,{children:"".concat(e.tag)}),Object(A.jsx)(v.a,{children:"".concat(e.client_name)}),Object(A.jsx)(v.a,{children:e.employee}),Object(A.jsx)(v.a,{children:new Date(1e3*e.date.lastActivity.seconds).toLocaleString()}),Object(A.jsxs)(v.a,{align:"right",children:["0"===t&&Object(A.jsx)(w.a,{component:i.b,to:"/dashboard/taller/ordenes/detalles/".concat(e.id),children:Object(A.jsx)(S.a,{fontSize:"small"})}),"1"===t&&Object(A.jsx)(w.a,{component:i.b,to:"/dashboard/taller/ordenes/inactivas/detalles/".concat(e.id),children:Object(A.jsx)(S.a,{fontSize:"small"})})]})]},e.id)}))})]})})}),Object(A.jsx)(y.a,{component:"div",count:te.length,onPageChange:function(e,t){J(t)},onRowsPerPageChange:function(e){q(parseInt(e.target.value,10))},page:H,rowsPerPage:V,rowsPerPageOptions:[5,10,25]})]}))}}}]);
//# sourceMappingURL=36.8552508c.chunk.js.map